# API Provider 使用指南

## 📖 简介

API Provider 配置管理功能允许您管理多个大模型API的配置，支持OpenAI、DeepSeek、Ollama等主流AI服务。

## 🚀 快速开始

### 访问 API Config 页面

1. **登录系统**
   - 使用您的手机号和密码登录

2. **进入配置页面**
   - 登录后，在顶部导航栏会显示"API Config"菜单
   - 点击"API Config"即可进入配置管理页面

### 添加第一个 Provider

1. 点击页面右上角的"➕ 添加 Provider"按钮
2. 在弹出的对话框中填写配置信息
3. 点击"添加"按钮保存

## 📝 配置字段说明

### Provider 类型（必填）

选择您要配置的API类型：

- **OpenAI**: OpenAI官方API
- **DeepSeek**: DeepSeek国产大模型
- **Ollama**: 本地部署的Ollama
- **Custom**: 自定义API配置

选择预设类型后，API地址会自动填充，您也可以手动修改。

### Provider 名称（必填）

为这个配置起一个容易识别的名字，例如：
- "我的OpenAI"
- "公司DeepSeek账号"
- "本地Llama2"

### API 密钥（必填/可选）

- **新建时**: 必须填写
- **编辑时**: 留空表示保持原密钥不变

不同Provider的密钥格式：
- OpenAI/DeepSeek: `sk-xxxxxxxxxx`
- Ollama本地: 可以填写任意标识（如`local`）
- 自定义: 根据API要求填写

### API 地址（必填）

API的完整访问地址，例如：
- OpenAI: `https://api.openai.com/v1`
- DeepSeek: `https://api.deepseek.com`
- Ollama: `http://localhost:11434/v1`

### 模型名称（必填）

要使用的模型名称，支持输入建议：

**OpenAI 常用模型**:
- `gpt-4`: 最强大的模型
- `gpt-4-turbo`: 更快更便宜的GPT-4
- `gpt-3.5-turbo`: 快速且经济的模型
- `gpt-4o`: 最新的多模态模型

**DeepSeek 模型**:
- `deepseek-chat`: 对话模型
- `deepseek-coder`: 代码专用模型

**Ollama 本地模型**:
- `llama2`: Meta的开源模型
- `llama3`: Llama系列最新版本
- `mistral`: 高性能开源模型
- `codellama`: 代码专用模型
- `qwen`: 通义千问

### API 版本（可选）

API的版本号，默认为 `v1`。通常不需要修改。

### 开放类型（必填）

选择这个配置的可见范围：

- **私有（🔒）**: 只有您自己可以使用
- **公开（🌐）**: 其他用户也可以查看和使用

> ⚠️ 注意：公开的Provider会分享给其他用户，请谨慎选择。

### 备注说明（可选）

可以添加一些说明信息，方便记忆和管理。例如：
- "用于生产环境"
- "测试账号，每月10美元额度"
- "本地开发使用"

## 🎯 使用场景示例

### 场景1: 配置 OpenAI

```
Provider类型: OpenAI
Provider名称: 我的OpenAI账号
API密钥: sk-xxxxxxxxxxxxxxxxxxxxxxxx
API地址: https://api.openai.com/v1 (自动填充)
模型名称: gpt-4
API版本: v1
开放类型: 私有
备注: 公司账号，每月100美元额度
```

### 场景2: 配置 DeepSeek

```
Provider类型: DeepSeek
Provider名称: DeepSeek Chat
API密钥: sk-xxxxxxxxxxxxxxxxxxxxxxxx
API地址: https://api.deepseek.com (自动填充)
模型名称: deepseek-chat
API版本: v1
开放类型: 私有
备注: 性价比高，适合日常使用
```

### 场景3: 配置本地 Ollama

```
Provider类型: Ollama
Provider名称: 本地Llama2
API密钥: local
API地址: http://localhost:11434/v1 (自动填充)
模型名称: llama2
API版本: v1
开放类型: 私有
备注: 本地部署，免费使用
```

### 场景4: 配置自定义 API

```
Provider类型: Custom
Provider名称: 自定义AI服务
API密钥: your-custom-api-key
API地址: https://your-api-domain.com/v1
模型名称: custom-model
API版本: v1
开放类型: 私有
备注: 公司内部AI服务
```

## ⚙️ 管理操作

### 查看 Provider 列表

登录后访问"API Config"页面，您可以看到：

- **名称**: Provider的名称和图标
- **API地址**: 完整的API访问地址
- **模型**: 使用的模型名称
- **版本**: API版本
- **状态**: 启用或禁用状态（可点击切换）
- **开放类型**: 私有或公开（可点击切换）
- **创建时间**: 配置创建的日期时间
- **操作**: 编辑和删除按钮

### 编辑 Provider

1. 在列表中找到要编辑的Provider
2. 点击该行右侧的"✏️"编辑按钮
3. 在弹出的对话框中修改信息
4. **注意**: API密钥留空表示不修改原密钥
5. 点击"保存修改"按钮

### 删除 Provider

1. 在列表中找到要删除的Provider
2. 点击该行右侧的"🗑️"删除按钮
3. 在确认对话框中点击"删除"
4. Provider将被永久删除

> ⚠️ 警告：删除操作不可撤销，请谨慎操作。

### 快速切换状态

**启用/禁用 Provider**:
- 直接点击"状态"列的标签
- 绿色"✓ 启用"表示当前启用
- 红色"✗ 禁用"表示当前禁用
- 点击即可切换，无需确认

**切换开放类型**:
- 直接点击"开放类型"列的标签
- 蓝色"🌐 公开"表示公开可用
- 橙色"🔒 私有"表示私有使用
- 点击即可切换，无需确认

## 🔐 安全建议

### API 密钥安全

1. **不要分享**: 永远不要将您的API密钥分享给他人
2. **定期更换**: 建议定期更换API密钥
3. **权限控制**: 在API提供商处设置适当的权限和额度限制
4. **监控使用**: 定期检查API的使用情况和费用

### 公开 Provider 注意事项

如果您设置Provider为"公开"：

- ✅ 其他用户可以看到这个配置
- ✅ 其他用户可以使用这个API
- ⚠️ API密钥可能被滥用
- ⚠️ 可能产生意外费用

**建议**:
- 公开Provider时使用专门的API密钥
- 在API提供商处设置使用限额
- 定期监控使用情况

## 💡 使用技巧

### 1. 多配置管理

您可以为同一个服务创建多个配置：
- 开发环境配置
- 测试环境配置
- 生产环境配置

### 2. 模型选择策略

根据任务选择合适的模型：
- **简单任务**: 使用`gpt-3.5-turbo`或`deepseek-chat`
- **复杂任务**: 使用`gpt-4`
- **代码相关**: 使用`gpt-4`或`deepseek-coder`
- **本地开发**: 使用Ollama本地模型

### 3. 备注标签化

在备注中使用标签，方便查找：
- `[生产]` 生产环境使用
- `[测试]` 测试环境使用
- `[限额100]` 每月100美元限额
- `[免费]` 免费额度

### 4. 禁用闲置配置

对于暂时不用的Provider：
- 点击状态标签禁用
- 可以随时重新启用
- 不会删除配置信息

## ❓ 常见问题

### Q1: 为什么看不到"API Config"菜单？

**A**: "API Config"菜单仅在登录后显示。请先登录系统。

### Q2: 编辑时是否必须重新输入API密钥？

**A**: 不需要。在编辑模式下，API密钥字段留空表示保持原密钥不变。

### Q3: 如何测试Provider配置是否正确？

**A**: 目前暂不支持在线测试。建议：
1. 确保API地址和密钥正确
2. 在实际使用中验证
3. 查看API提供商的控制台确认请求

### Q4: 删除Provider会影响已有的对话吗？

**A**: 不会。删除Provider只是删除配置信息，不影响历史数据。

### Q5: 可以导入/导出配置吗？

**A**: 当前版本暂不支持。这是后续计划中的功能。

### Q6: 公开的Provider会被其他用户看到密钥吗？

**A**: 不会。API密钥始终加密存储，其他用户无法看到完整密钥。

### Q7: Ollama本地部署如何配置？

**A**: 
1. 确保Ollama已在本地启动（默认端口11434）
2. API地址填写: `http://localhost:11434/v1`
3. API密钥可填写任意标识（如`local`）
4. 模型名称填写已下载的模型（如`llama2`）

## 📞 获取帮助

如遇到问题：

1. 查看本使用指南
2. 检查API提供商的文档
3. 联系系统管理员
4. 查看系统错误提示信息

## 🔄 版本历史

### v1.0.0 (2025-10-23)

- ✅ 支持添加、编辑、删除Provider
- ✅ 支持OpenAI、DeepSeek、Ollama预设
- ✅ 支持快速切换状态和开放类型
- ✅ 表格化展示，支持响应式布局
- ✅ 完整的表单验证
- ✅ 友好的用户界面

### 后续计划

- [ ] 支持测试连接功能
- [ ] 支持导入/导出配置
- [ ] 支持批量操作
- [ ] 支持搜索和过滤
- [ ] 支持Provider使用统计

---

**最后更新**: 2025-10-23  
**文档版本**: 1.0.0
